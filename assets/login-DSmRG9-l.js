import{J as k,r as m,A as S,K as F,M as x,U as E,V as C,j as e,x as L,W as P,a0 as D,X as I,Y as O,L as h,B as A,t as J,a1 as T,$ as i}from"./index-BCinptGL.js";import{T as X,I as Y}from"./theme-switch-YfxIZgvr.js";import{m as B,b as M}from"./password-input-DWR3012d.js";const W="http://127.0.0.1:8000/api/login/",z=()=>{const g=k(),[p,$]=m.useState(!1),{user:u,setUser:j,setToken:f}=m.useContext(S),w=F({email:x().email("Invalid email address").required("Enter Your Email Address"),password:x().required("Enter Your Password")}),l=E({mutationFn:async t=>{var a,o;try{const s=await J.post(W,t);if(s.status===200){const d=T(s==null?void 0:s.data.access);j(d),f(s==null?void 0:s.data),localStorage.setItem("tokens",JSON.stringify(s==null?void 0:s.data)),localStorage.setItem("user",JSON.stringify(d)),g("/"),i.success("Welcome to X-Shark")}}catch(s){console.log(s),i.error((o=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:o.detail)}}}),{handleSubmit:N,handleChange:n,values:r,touched:c,errors:b,validateForm:v}=C({initialValues:{email:"",password:""},validationSchema:w,onSubmit:async t=>{const a=new FormData;a.append("email",t.email),a.append("password",t.password),l.mutate(a)}}),y=async t=>{t.preventDefault();const a=await v();Object.keys(a).length>0?Object.keys(a).forEach(o=>{a[o]&&i.error(a[o])}):N()};return u?e.jsx(L,{to:"/"}):e.jsxs(e.Fragment,{children:[(l.isPending||p)&&e.jsx("div",{className:"z-[999999999999999] fixed inset-0 bg-black bg-opacity-60",children:e.jsx(P,{})}),e.jsx(D,{position:"top-center",toastOptions:{style:{color:"white",background:"#6868c7",border:"none"},className:"my-toast"}}),e.jsxs(B.section,{className:"login overflow-hidden min-h-screen md:px-20 md:pt-10 flex items-end md:items-center justify-center",children:[e.jsx("div",{className:"hidden md:block logo-animation",children:e.jsx("img",{src:"/logo2.png",width:"100%",height:"100px",className:"border-3"})}),e.jsxs("div",{className:"w-full sm:max-w-[500px] md:flex-[2] md:p-6 p-3 bg-transparent",children:[e.jsxs("div",{className:"flex items-center md:justify-between",children:[e.jsx("div",{className:"hidden lg:block text-2xl font-bold tracking-tight text-white",children:e.jsx("h1",{className:"md:text-4xl",children:"X-Shark"})}),e.jsx("div",{className:"block lg:hidden md:block logo-animation",children:e.jsx("img",{src:"/logo2.png",width:"50%",height:"100px"})}),e.jsx(X,{})]}),e.jsx("p",{className:"font-normal text-blue-500 my-1",children:"Welcome Back!"}),e.jsx("p",{className:"text-sm text-white font-normal jost",children:"Enter Your details to continue"}),e.jsxs("form",{onSubmit:y,children:[e.jsx("div",{className:"my-2",children:e.jsxs("label",{className:"",htmlFor:"email",children:[e.jsx("p",{className:"text-white text-sm",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{name:"email",id:"email",value:r.email,onChange:n,type:"text",placeholder:"1234567@gmail.com"}),c.email&&b.email?e.jsx(I,{color:"red",className:"absolute right-4 top-1/2 -translate-y-1/2"}):c.email&&e.jsx(O,{color:"green",className:"absolute right-4 top-1/2 -translate-y-1/2"})]})]})}),e.jsx("div",{className:"my-2",children:e.jsxs("label",{className:"",htmlFor:"password",children:[e.jsx("p",{className:"text-white text-sm",children:"Password"}),e.jsx("div",{className:"relative",children:e.jsx(M,{name:"password",id:"password",value:r.password,onChange:n,placeholder:"Password"})})]})}),e.jsx("p",{className:"text-right my-2 font-light text-white text-xs",children:e.jsx(h,{to:"/forgotPassword",children:"Forgot Password?"})}),e.jsx(A,{type:"submit",className:"w-full",children:"Login"}),e.jsx("p",{className:"text-center font-extralight py-1",children:"or"})]}),e.jsx("div",{id:"loginDiv",className:"login-options flex flex-col gap-3 font-medium"}),e.jsxs("p",{className:"text-xs mt-4 font-light text-white jost",children:["Don't have an account? ",e.jsx(h,{className:"underline underline-offset-2 text-blue-500",to:"/register",children:"Create Account"})]})]})]})]})};export{z as default};
